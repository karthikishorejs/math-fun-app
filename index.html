<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Learn Fun">
    <title>Learn Fun - Math & Reading Adventures!</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header with stats -->
        <header class="game-header">
            <div class="stats-bar">
                <div class="stat">
                    <span class="stat-icon">â­</span>
                    <span id="stars-count">0</span>
                </div>
                <div class="stat">
                    <span class="stat-icon">ğŸ”¥</span>
                    <span id="streak-count">0</span>
                </div>
                <div class="stat">
                    <span class="stat-icon">âœ“</span>
                    <span id="correct-count">0</span>/<span id="total-count">0</span>
                </div>
            </div>
        </header>

        <!-- Subject Selection Screen (NEW HOME) -->
        <section id="home-screen" class="screen active">
            <h1 class="title">ğŸŒŸ Learn Fun!</h1>
            <p class="subtitle">Choose your adventure!</p>

            <div class="subject-cards">
                <button class="subject-card math-card" id="go-to-math">
                    <span class="subject-icon">ğŸ§®</span>
                    <span class="subject-title">Math</span>
                    <span class="subject-desc">Numbers & Problem Solving</span>
                </button>

                <button class="subject-card reading-card" id="go-to-reading">
                    <span class="subject-icon">ğŸ“š</span>
                    <span class="subject-title">Reading</span>
                    <span class="subject-desc">Words & Sentences</span>
                </button>
            </div>

            <div class="trophy-case">
                <h3>ğŸ† Trophy Case</h3>
                <div id="trophies"></div>
            </div>

            <!-- Parent Buttons -->
            <div class="parent-buttons">
                <button class="parent-btn guide-btn" id="open-guide">
                    ğŸ“– How to Teach
                </button>
                <button class="parent-btn dashboard-btn" id="open-dashboard">
                    ğŸ“Š Dashboard
                </button>
            </div>
        </section>

        <!-- Math Menu Screen -->
        <section id="math-menu-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" id="back-from-math-menu">â† Back</button>
                <h2>ğŸ§® Math Adventures</h2>
            </div>

            <div class="level-selector">
                <span class="level-label">Level:</span>
                <div class="level-buttons" id="math-level-buttons">
                    <button class="level-btn active" data-level="1">Level 1</button>
                    <button class="level-btn" data-level="2">Level 2</button>
                    <button class="level-btn" data-level="3">Level 3</button>
                </div>
            </div>

            <div class="menu-buttons" id="math-menu-buttons">
                <!-- Level 1: Numbers to 20 -->
                <button class="menu-btn bonds-btn" data-mode="bonds">
                    <span class="btn-icon">ğŸ¯</span>
                    <span class="btn-text">Number Bonds to 10</span>
                    <span class="btn-desc">What + ? = 10</span>
                </button>

                <button class="menu-btn addition-btn" data-mode="addition">
                    <span class="btn-icon">â•</span>
                    <span class="btn-text">Addition to 20</span>
                    <span class="btn-desc">Add numbers up to 20</span>
                </button>

                <button class="menu-btn subtraction-btn" data-mode="subtraction">
                    <span class="btn-icon">â–</span>
                    <span class="btn-text">Subtraction from 10</span>
                    <span class="btn-desc">10 - ? = ?</span>
                </button>

                <button class="menu-btn mixed-btn" data-mode="mixed">
                    <span class="btn-icon">ğŸ²</span>
                    <span class="btn-text">Mixed Practice</span>
                    <span class="btn-desc">All types mixed up!</span>
                </button>

                <button class="menu-btn timer-btn" data-mode="timer">
                    <span class="btn-icon">â±ï¸</span>
                    <span class="btn-text">Speed Challenge</span>
                    <span class="btn-desc">Race against the clock!</span>
                </button>
            </div>

            <!-- Settings -->
            <div class="settings-section">
                <h3>âš™ï¸ Settings</h3>
                <div class="setting-row">
                    <label>Difficulty:</label>
                    <div class="difficulty-buttons" id="difficulty-buttons">
                        <button class="diff-btn active" data-difficulty="easy">Easy</button>
                        <button class="diff-btn" data-difficulty="medium">Medium</button>
                        <button class="diff-btn" data-difficulty="hard">Hard</button>
                    </div>
                </div>
                <div class="setting-row">
                    <label>Sound:</label>
                    <button class="sound-toggle" id="sound-toggle">ğŸ”Š On</button>
                </div>
            </div>
        </section>

        <!-- Reading Menu Screen -->
        <section id="reading-menu-screen" class="screen">
            <div class="screen-header">
                <button class="back-btn" id="back-from-reading-menu">â† Back</button>
                <h2>ğŸ“š Reading Adventures</h2>
            </div>

            <div class="menu-buttons">
                <button class="menu-btn story-btn" data-mode="story">
                    <span class="btn-icon">ğŸ“–</span>
                    <span class="btn-text">Story Adventures</span>
                    <span class="btn-desc">Interactive stories with choices!</span>
                </button>

                <button class="menu-btn vocab-btn" data-mode="vocabulary">
                    <span class="btn-icon">ğŸ“</span>
                    <span class="btn-text">Vocabulary Builder</span>
                    <span class="btn-desc">Learn new words & meanings</span>
                </button>

                <button class="menu-btn comprehension-btn" data-mode="comprehension">
                    <span class="btn-icon">ğŸ”</span>
                    <span class="btn-text">Reading Comprehension</span>
                    <span class="btn-desc">Read passages & answer questions</span>
                </button>

                <button class="menu-btn spelling-btn" data-mode="spelling">
                    <span class="btn-icon">âœï¸</span>
                    <span class="btn-text">Spelling Challenge</span>
                    <span class="btn-desc">Spell tricky words!</span>
                </button>
            </div>

            <!-- Difficulty for Spelling -->
            <div class="settings-section">
                <h3>âš™ï¸ Settings</h3>
                <div class="setting-row">
                    <label>Spelling Level:</label>
                    <div class="difficulty-buttons" id="spelling-difficulty-buttons">
                        <button class="diff-btn active" data-difficulty="easy">Easy</button>
                        <button class="diff-btn" data-difficulty="medium">Medium</button>
                        <button class="diff-btn" data-difficulty="hard">Hard</button>
                    </div>
                </div>
                <div class="setting-row">
                    <label>Sound:</label>
                    <button class="sound-toggle reading-sound-toggle" id="reading-sound-toggle">ğŸ”Š On</button>
                </div>
                <div class="setting-row ai-setting">
                    <label>ğŸ¤– AI Stories:</label>
                    <input type="password" class="api-key-input" id="hf-api-key" placeholder="Hugging Face API key (optional)">
                    <small class="api-hint">Free at <a href="https://huggingface.co/settings/tokens" target="_blank">huggingface.co</a></small>
                </div>
            </div>
        </section>

        <!-- Teaching Guide Screen -->
        <section id="guide-screen" class="screen">
            <div class="guide-header">
                <button class="back-btn" id="back-from-guide">â† Back</button>
                <h2>ğŸ“– Parent's Teaching Guide</h2>
            </div>

            <div class="guide-content">
                <!-- Guide Tabs -->
                <div class="guide-tabs">
                    <button class="guide-tab active" data-tab="math">ğŸ§® Math</button>
                    <button class="guide-tab" data-tab="reading">ğŸ“š Reading</button>
                </div>

                <!-- Math Guide Content -->
                <div class="guide-tab-content active" id="math-guide">
                    <div class="guide-intro">
                        <p><strong>"Thinking in 10s"</strong> is a powerful mental math strategy. When kids master number bonds to 10, math becomes much easier!</p>
                    </div>

                    <div class="guide-section">
                        <h3>ğŸ¯ Number Bonds to 10</h3>
                        <p class="guide-text">These are pairs of numbers that add up to 10. Kids should memorize these like sight words!</p>
                        <div class="bonds-grid">
                            <div class="bond-pair"><span>1</span><span>+</span><span>9</span><span>=</span><span>10</span></div>
                            <div class="bond-pair"><span>2</span><span>+</span><span>8</span><span>=</span><span>10</span></div>
                            <div class="bond-pair"><span>3</span><span>+</span><span>7</span><span>=</span><span>10</span></div>
                            <div class="bond-pair"><span>4</span><span>+</span><span>6</span><span>=</span><span>10</span></div>
                            <div class="bond-pair"><span>5</span><span>+</span><span>5</span><span>=</span><span>10</span></div>
                        </div>
                    </div>

                    <div class="guide-section">
                        <h3>ğŸ”¢ Two-Digit Addition (Level 2-3)</h3>
                        <p class="guide-text">For bigger numbers like <strong>34 + 28</strong>, break it into tens and ones:</p>
                        <div class="example-box">
                            <div class="example-step">
                                <span class="step-num">1</span>
                                <span class="step-text">34 + 28 = ?</span>
                            </div>
                            <div class="example-step">
                                <span class="step-num">2</span>
                                <span class="step-text">Add tens: 30 + 20 = <strong>50</strong></span>
                            </div>
                            <div class="example-step">
                                <span class="step-num">3</span>
                                <span class="step-text">Add ones: 4 + 8 = <strong>12</strong></span>
                            </div>
                            <div class="example-step">
                                <span class="step-num">4</span>
                                <span class="step-text">Combine: 50 + 12 = <strong>62</strong> âœ“</span>
                            </div>
                        </div>
                    </div>

                    <div class="guide-section reference">
                        <h3>ğŸ“‹ Math Levels</h3>
                        <div class="levels-reference">
                            <div class="level-ref"><strong>Level 1:</strong> Numbers to 20</div>
                            <div class="level-ref"><strong>Level 2:</strong> Numbers to 50</div>
                            <div class="level-ref"><strong>Level 3:</strong> Numbers to 100</div>
                        </div>
                    </div>
                </div>

                <!-- Reading Guide Content -->
                <div class="guide-tab-content" id="reading-guide">
                    <div class="guide-intro">
                        <p><strong>Sight words</strong> are common words that kids should recognize instantly without sounding out. They make up 50-75% of text in children's books!</p>
                    </div>

                    <div class="guide-section">
                        <h3>ğŸ‘€ Sight Word Levels</h3>
                        <div class="levels-reference">
                            <div class="level-ref"><strong>Level 1:</strong> the, and, a, to, is, in, it, you, that, he</div>
                            <div class="level-ref"><strong>Level 2:</strong> was, for, on, are, with, his, they, at, be, this</div>
                            <div class="level-ref"><strong>Level 3:</strong> have, from, by, not, but, what, all, were, when, there</div>
                        </div>
                    </div>

                    <div class="guide-section">
                        <h3>ğŸ’¡ Tips for Reading Practice</h3>
                        <ul class="tips-list">
                            <li><strong>Flash quickly</strong> - Sight words should be recognized in under 3 seconds</li>
                            <li><strong>Say it aloud</strong> - Have your child say the word out loud</li>
                            <li><strong>Use in sentences</strong> - "Can you find 'the' in this book?"</li>
                            <li><strong>Write it</strong> - Practice writing helps memory</li>
                            <li><strong>Make it fun</strong> - Play games, use rewards!</li>
                        </ul>
                    </div>
                </div>

                <button class="start-practice-btn" id="start-from-guide">ğŸ® Start Practice!</button>
            </div>
        </section>

        <!-- Parent Dashboard Screen -->
        <section id="dashboard-screen" class="screen">
            <div class="dashboard-header">
                <button class="back-btn" id="back-from-dashboard">â† Back</button>
                <h2>ğŸ“Š Parent Dashboard</h2>
            </div>

            <div class="dashboard-content">
                <!-- Dashboard Tabs -->
                <div class="dashboard-tabs">
                    <button class="dash-tab active" data-tab="math">ğŸ§® Math</button>
                    <button class="dash-tab" data-tab="reading">ğŸ“š Reading</button>
                </div>

                <!-- Overview Cards -->
                <div class="dashboard-cards">
                    <div class="dash-card">
                        <span class="dash-card-icon">ğŸ“…</span>
                        <span class="dash-card-value" id="dash-sessions-today">0</span>
                        <span class="dash-card-label">Sessions Today</span>
                    </div>
                    <div class="dash-card">
                        <span class="dash-card-icon">ğŸ¯</span>
                        <span class="dash-card-value" id="dash-accuracy">0%</span>
                        <span class="dash-card-label">Overall Accuracy</span>
                    </div>
                    <div class="dash-card">
                        <span class="dash-card-icon">â±ï¸</span>
                        <span class="dash-card-value" id="dash-time-today">0m</span>
                        <span class="dash-card-label">Practice Today</span>
                    </div>
                </div>

                <!-- Accuracy by Type -->
                <div class="dashboard-section" id="math-accuracy-section">
                    <h3>ğŸ“ˆ Math Accuracy by Type</h3>
                    <div class="accuracy-bars">
                        <div class="accuracy-row">
                            <span class="accuracy-label">ğŸ¯ Number Bonds</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar" id="accuracy-bonds" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-bonds-text">0%</span>
                        </div>
                        <div class="accuracy-row">
                            <span class="accuracy-label">â• Addition</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar" id="accuracy-addition" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-addition-text">0%</span>
                        </div>
                        <div class="accuracy-row">
                            <span class="accuracy-label">â– Subtraction</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar" id="accuracy-subtraction" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-subtraction-text">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Reading Accuracy -->
                <div class="dashboard-section" id="reading-accuracy-section" style="display: none;">
                    <h3>ğŸ“ˆ Reading Accuracy by Type</h3>
                    <div class="accuracy-bars">
                        <div class="accuracy-row">
                            <span class="accuracy-label">ğŸ“ Vocabulary</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar reading-bar" id="accuracy-vocabulary" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-vocabulary-text">0%</span>
                        </div>
                        <div class="accuracy-row">
                            <span class="accuracy-label">ğŸ” Comprehension</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar reading-bar" id="accuracy-comprehension" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-comprehension-text">0%</span>
                        </div>
                        <div class="accuracy-row">
                            <span class="accuracy-label">âœï¸ Spelling</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar reading-bar" id="accuracy-spelling" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-spelling-text">0%</span>
                        </div>
                        <div class="accuracy-row">
                            <span class="accuracy-label">ğŸ“– Stories</span>
                            <div class="accuracy-bar-container">
                                <div class="accuracy-bar reading-bar" id="accuracy-story" style="width: 0%"></div>
                            </div>
                            <span class="accuracy-percent" id="accuracy-story-text">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Weekly Progress -->
                <div class="dashboard-section">
                    <h3>ğŸ“… Last 7 Days</h3>
                    <div class="weekly-chart" id="weekly-chart"></div>
                </div>

                <!-- Recent Sessions -->
                <div class="dashboard-section">
                    <h3>ğŸ• Recent Sessions</h3>
                    <div class="sessions-list" id="sessions-list"></div>
                </div>

                <!-- Problem Areas -->
                <div class="dashboard-section">
                    <h3>ğŸ’¡ Areas to Practice</h3>
                    <div class="problem-areas" id="problem-areas"></div>
                </div>

                <!-- Reset Stats -->
                <button class="reset-stats-btn" id="reset-stats">ğŸ—‘ï¸ Reset All Progress</button>
            </div>
        </section>

        <!-- Math Game Screen -->
        <section id="game-screen" class="screen">
            <div class="game-top-bar">
                <button class="back-btn" id="back-to-menu">â† Back</button>
                <div class="timer-display" id="timer-display">
                    <span class="timer-icon">â±ï¸</span>
                    <span id="timer-value">60</span>
                </div>
            </div>

            <div class="game-area">
                <h2 id="game-mode-title" class="mode-title">Number Bonds</h2>

                <!-- Ten Frame Visual (for Level 1) -->
                <div class="ten-frame-container" id="ten-frame-container">
                    <div class="ten-frame" id="ten-frame"></div>
                    <p class="ten-frame-label">Ten Frame</p>
                </div>

                <!-- Place Value Visual (for Level 2-3) -->
                <div class="place-value-container" id="place-value-container" style="display: none;">
                    <div class="place-value-display">
                        <div class="pv-section tens-section">
                            <div class="pv-blocks" id="pv-tens"></div>
                            <span class="pv-label">Tens</span>
                        </div>
                        <div class="pv-section ones-section">
                            <div class="pv-blocks" id="pv-ones"></div>
                            <span class="pv-label">Ones</span>
                        </div>
                    </div>
                </div>

                <!-- Problem Display -->
                <div class="problem-container">
                    <span id="num1" class="problem-num">5</span>
                    <span id="operator" class="problem-operator">+</span>
                    <span id="num2" class="problem-num">?</span>
                    <span class="problem-equals">=</span>
                    <span id="result" class="problem-num">10</span>
                </div>

                <!-- Answer Choices -->
                <div class="answers-container" id="answers"></div>

                <!-- Feedback Area -->
                <div class="feedback-area" id="feedback">
                    <span class="feedback-emoji"></span>
                    <span class="feedback-text"></span>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <span class="progress-text"><span id="current-problem">1</span> / <span id="total-problems">10</span></span>
                </div>
            </div>
        </section>

        <!-- Reading Game Screen -->
        <section id="reading-game-screen" class="screen">
            <div class="game-top-bar">
                <button class="back-btn" id="back-to-reading-menu">â† Back</button>
            </div>

            <div class="game-area reading-game-area">
                <h2 id="reading-mode-title" class="mode-title">Reading</h2>

                <!-- Story Loading State -->
                <div class="story-loading" id="story-loading" style="display: none;">
                    <div class="loading-spinner"></div>
                    <p class="loading-text">âœ¨ Creating your story...</p>
                </div>

                <!-- Story Container (for story mode) -->
                <div class="story-container" id="story-container" style="display: none;">
                    <h3 class="story-title" id="story-title">Story Title</h3>
                    <div class="story-text" id="story-text"></div>
                    <div class="story-choices" id="story-choices"></div>
                </div>

                <!-- Vocabulary Container -->
                <div class="vocab-container" id="vocab-container" style="display: none;">
                    <div class="vocab-word" id="vocab-word">brilliant</div>
                    <div class="vocab-definition" id="vocab-definition">"very smart or very bright"</div>
                    <div class="vocab-question" id="vocab-question"></div>
                    <div class="vocab-choices" id="vocab-choices"></div>
                </div>

                <!-- Comprehension Container -->
                <div class="comprehension-container" id="comprehension-container" style="display: none;">
                    <h3 class="passage-title" id="passage-title">Title</h3>
                    <div class="passage-text" id="passage-text"></div>
                    <div class="comprehension-question" id="comprehension-question"></div>
                    <div class="comprehension-choices" id="comprehension-choices"></div>
                </div>

                <!-- Spelling Container -->
                <div class="spelling-container" id="spelling-container" style="display: none;">
                    <button class="speak-btn big-speak" id="speak-word">ğŸ”Š Hear the Word</button>
                    <input type="text" class="spelling-input" id="spelling-input" placeholder="Type the word..." autocomplete="off" autocapitalize="none">
                    <button class="submit-spelling-btn" id="submit-spelling">Check âœ“</button>
                </div>

                <!-- Answer Choices -->
                <div class="reading-answers-container" id="reading-answers"></div>

                <!-- Feedback Area -->
                <div class="feedback-area" id="reading-feedback">
                    <span class="feedback-emoji"></span>
                    <span class="feedback-text"></span>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container" id="reading-progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill reading-progress" id="reading-progress-fill"></div>
                    </div>
                    <span class="progress-text"><span id="reading-current-problem">1</span> / <span id="reading-total-problems">10</span></span>
                </div>
            </div>
        </section>

        <!-- Results Screen -->
        <section id="results-screen" class="screen">
            <div class="results-content">
                <h2 class="results-title" id="results-title">Great Job!</h2>
                <div class="results-emoji" id="results-emoji">ğŸŒŸ</div>

                <div class="results-stats">
                    <div class="result-stat">
                        <span class="result-value" id="result-correct">8</span>
                        <span class="result-label">Correct</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-value" id="result-total">10</span>
                        <span class="result-label">Total</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-value" id="result-stars">+5</span>
                        <span class="result-label">Stars Earned</span>
                    </div>
                </div>

                <div class="result-stat timer-result" id="timer-result">
                    <span class="result-value" id="result-time">45s</span>
                    <span class="result-label">Time</span>
                </div>

                <div class="reward-animation" id="reward-animation"></div>

                <div class="results-buttons">
                    <button class="results-btn play-again-btn" id="play-again">Play Again</button>
                    <button class="results-btn menu-btn-small" id="back-to-menu-results">Main Menu</button>
                </div>
            </div>
        </section>

        <!-- Celebration Overlay -->
        <div class="celebration-overlay" id="celebration">
            <div class="confetti-container" id="confetti"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
